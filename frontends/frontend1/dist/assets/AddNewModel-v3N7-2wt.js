import{_ as g,E as y,s as w,e as a,h as r,o as b,d as t,q as u,b as c}from"./index-BGBuXAIC.js";const V={data(){return{newmodel:[{Id:"",formula:""}],formulaall:""}},methods:{addItem(){this.newmodel.push({Id:"",formula:""})},deleteRow1(n){const e=this.newmodel.indexOf(n);e!==-1&&this.newmodel.splice(e,1)},nextstep(){this.$router.push({name:"NewModel",query:{Total:this.formulaall}})},hebing(){const{hebing:n,lastKey:e}=this.combineFormulas(this.newmodel),s={};n.forEach((l,d)=>{s[d]=l}),this.$http.post("http://47.97.176.174:8087/chainmaker?cmb=MergeFormulas",{formulas:s,target:e}).then(l=>{console.log(l),this.formulaall=l.data.data,y({message:"合并成功！",type:"success"})}).catch(l=>{console.log(l)})},combineFormulas(n){const e=new Map;let s="";return n.forEach(l=>{e.set(l.Id,l.formula),s=l.Id}),{hebing:e,lastKey:s}}}},k=c("text",{style:{"font-size":"30px"}},"自定义模型",-1),C={style:{display:"flex","margin-left":"100px"}},I={style:{display:"flex","margin-left":"20px","margin-top":"20px"}},v=c("span",{style:{"font-size":"25px"}},"公式合并为：",-1);function M(n,e,s,l,d,m){const i=r("el-button"),f=r("el-input"),_=r("el-table-column"),h=r("el-table"),x=r("el-card");return b(),w(x,{style:{"margin-top":"20px","margin-left":"20px","margin-right":"20px"}},{header:a(()=>[k]),default:a(()=>[t(i,{type:"primary",class:"mt-4",onClick:e[0]||(e[0]=o=>m.addItem()),style:{"margin-top":"10px","margin-left":"30px"}},{default:a(()=>[u("新增公式")]),_:1}),c("div",C,[t(h,{data:d.newmodel,border:"",style:{width:"500px","margin-left":"8px","margin-top":"20px"}},{default:a(()=>[t(_,{label:"公式编号",width:"150"},{default:a(o=>[t(f,{modelValue:o.row.Id,"onUpdate:modelValue":p=>o.row.Id=p,placeholder:"请输入编号"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(_,{label:"公式",width:"250"},{default:a(o=>[t(f,{modelValue:o.row.formula,"onUpdate:modelValue":p=>o.row.formula=p,placeholder:"请输入公式"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(_,{fixed:"right",label:"操作",width:"100"},{default:a(({row:o})=>[t(i,{type:"primary",onClick:p=>m.deleteRow1(o)},{default:a(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t(i,{type:"primary",size:"large",style:{"margin-top":"20px","margin-left":"280px"},onClick:m.hebing},{default:a(()=>[u("合并公式")]),_:1},8,["onClick"]),c("div",I,[v,t(f,{modelValue:d.formulaall,"onUpdate:modelValue":e[1]||(e[1]=o=>d.formulaall=o),style:{width:"400px"}},null,8,["modelValue"])]),t(i,{type:"primary",size:"large",style:{"margin-top":"20px","margin-left":"280px"},onClick:m.nextstep},{default:a(()=>[u("下一步")]),_:1},8,["onClick"])]),_:1})}const U=g(V,[["render",M]]);export{U as default};
