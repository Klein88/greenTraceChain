<script setup>
import {
  Monitor,
  FullScreen,
  Delete,
  Search,
  Message,
  Setting
} from '@element-plus/icons-vue'
import avatar from "@/assets/login/avatar.jpg";
import {computed, ref} from "vue";
import {useRouter} from "vue-router";
import {useStore} from "vuex";

const avatarUrl = ref(avatar)

const handleOpen = (key, keyPath) => {
  console.log(key, keyPath)
}
const handleClose = (key, keyPath) => {
  console.log(key, keyPath)
}
const router = useRouter();
const addnewmodel =()=>{
  router.push({ name: 'AddNewModel' });
}
const goToPersonalPage = () => {
  router.push({ name: 'Personal' }); // Personal 对应你的个人页面路由名称
};
const store = useStore()
const ID = computed(() => store.state.companyData.CompanyID)
</script>

<template>
  <div class="common-layout">
    <el-container>
      <el-aside class="aside">
        <el-card class="aside-card">
          <div class="aside-card-logo">
            <img src="../assets/dashboard/logo.png" alt="logo">
          </div>
          <el-scrollbar>
            <el-menu
                default-active="2"
                class="el-menu-vertical-demo"
                @open="handleOpen"
                @close="handleClose"
                router
                background-color="#283342"
                text-color="#909399"
                active-text-color="#FFFFFF"
            >
              <el-menu-item index="/Dashboard">
                <el-icon>
                  <svg t="1710378936880" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4863" width="200" height="200"><path d="M512 128C264.96 128 64 328.96 64 576c0 100.544 32.544 195.52 94.08 274.688a31.968 31.968 0 1 0 50.528-39.232A380.384 380.384 0 0 1 128 576C128 364.256 300.256 192 512 192s384 172.256 384 384c0 86.144-27.872 167.584-80.64 235.456a31.904 31.904 0 0 0 5.632 44.864 31.84 31.84 0 0 0 44.864-5.632A443.264 443.264 0 0 0 960 576c0-247.04-200.96-448-448-448z" p-id="4864"></path><path d="M512 352a32 32 0 0 0 32-32V256a32 32 0 1 0-64 0v64a32 32 0 0 0 32 32zM241.888 421.472a32 32 0 1 0-35.776 53.056l53.056 35.776a31.936 31.936 0 0 0 44.416-8.64 32 32 0 0 0-8.64-44.416l-53.056-35.776zM810.848 423.936a32 32 0 0 0-45.152-3.168l-48.32 41.984a32 32 0 0 0 41.984 48.32l48.32-41.984a32 32 0 0 0 3.168-45.152zM607.392 736c0-2.592 0.288-5.12-0.352-7.744l-64-256c-0.352-1.44-1.28-2.496-1.824-3.84-0.864-2.144-1.632-4.256-2.944-6.176-1.12-1.664-2.528-2.944-3.904-4.352-1.504-1.536-2.912-3.008-4.704-4.224-1.76-1.184-3.712-1.888-5.664-2.688-1.44-0.608-2.624-1.6-4.224-1.984-0.512-0.128-0.992 0.032-1.504-0.064-2.048-0.416-4.128-0.288-6.272-0.288-2.112 0-4.192-0.128-6.24 0.288-0.512 0.096-1.024-0.064-1.536 0.064-1.632 0.416-2.848 1.44-4.352 2.08-1.888 0.8-3.744 1.472-5.472 2.592-1.888 1.248-3.36 2.816-4.928 4.384-1.344 1.344-2.656 2.592-3.744 4.192-1.312 1.92-2.08 4-2.944 6.144-0.544 1.344-1.472 2.432-1.856 3.872l-64 256c-0.672 2.624-0.352 5.184-0.352 7.744H416c0 1.408 0.352 2.688 0.416 4.096l0.128 1.312C419.424 791.776 460.928 832 512 832s92.576-40.224 95.456-90.592l0.128-1.312c0.064-1.376 0.416-2.688 0.416-4.096h-0.608zM512 768a31.808 31.808 0 0 1-31.552-29.824L512 611.904l31.552 126.24A31.776 31.776 0 0 1 512 768z" p-id="4865"></path></svg>
                </el-icon>
                <span>仪表盘</span>
              </el-menu-item>
              <el-sub-menu>
                <template #title>
                  <el-icon>
                    <svg t="1710378730403" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4708" width="200" height="200"><path d="M979.2 158.848a32 32 0 0 0-38.4-23.936l-166.848 38.656a32 32 0 0 0-15.808 53.408L794.56 264.64l-194.56 173.568-101.024-95.68a32 32 0 0 0-45.152 1.152l-216.736 227.264A64 64 0 1 0 288 633.6c0-6.944-1.376-13.472-3.424-19.712l193.536-202.944 99.232 93.952a32 32 0 0 0 43.296 0.64L839.04 310.72l41.504 42.976a32 32 0 0 0 53.92-13.92l44.448-165.408a31.84 31.84 0 0 0 0.288-15.52z" p-id="4709"></path><path d="M928 450.464a32 32 0 0 0-32 32V736a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h530.656a32 32 0 0 0 0-64H160a96 96 0 0 0-96 96v576a96 96 0 0 0 96 96h704a96 96 0 0 0 96-96v-253.536a32 32 0 0 0-32-32zM912 896h-800a32 32 0 0 0 0 64h800a32 32 0 0 0 0-64z" p-id="4710"></path></svg>
                  </el-icon>
                  <span>碳核算</span>
                </template>
                <el-menu-item index="/CarbonAccounting">
                  <el-icon>
                    <svg t="1712470823098" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2725" width="190" height="190"><path d="M823.005708 0a106.235574 106.235574 0 0 1 71.549019 28.073497c19.497854 17.919253 31.572018 42.494229 33.790592 68.861131l0.426649 9.172951v236.534144a43.816841 43.816841 0 0 1-72.615641 33.107954 43.774176 43.774176 0 0 1-14.548727-27.092204l-0.426649-5.973085V106.235574a18.644556 18.644556 0 0 0-14.079414-17.791259l-4.095829-0.511979H126.288071a18.601892 18.601892 0 0 0-17.705929 14.079414l-0.511978 4.223824v811.486188a18.559227 18.559227 0 0 0 14.122078 17.791258l4.053164 0.511979H308.893796a43.859506 43.859506 0 0 1 5.973085 87.420357L308.893796 1023.957335H126.245406a106.320903 106.320903 0 0 1-71.549018-28.073497 105.808925 105.808925 0 0 1-33.790592-68.903796l-0.426649-9.130286V106.107579A105.808925 105.808925 0 0 1 48.211325 34.515895c17.919253-19.540519 42.494229-31.742677 68.903795-34.131911l9.130286-0.426649h696.717637z m23.337694 401.903254l6.101079 4.693138 132.346486 118.395067a57.170951 57.170951 0 0 1 8.788967 74.407566l-4.693138 6.186409-80.679305 91.644181c-7.466356 8.532978-18.004583 13.866089-29.353443 14.804717h-6.527728l-2.986542 0.127995c-9.42894 0-18.601892-3.029207-26.153577-8.660973l-5.333112-4.693138-105.851589-109.648764-210.849881 235.254197 0.298654 5.973085 1.91992 90.15091 75.090204-7.67968 4.09583-4.351818 164.771801-181.709763a43.646181 43.646181 0 0 1 61.864089-2.858547 44.115495 44.115495 0 0 1 7.253031 56.402983l-4.394483 5.631765-164.558477 181.539103a152.868297 152.868297 0 0 1-17.44994 16.895296c-12.244823 9.983584-24.446981 14.762052-35.539852 15.103371l-6.570393-0.25599-164.899796 18.943211-5.247781-4.607808-3.583851-178.168576c-5.84509-18.559227-0.469314-38.910379 11.860839-55.67768l4.906462-6.058415 321.095955-361.712928a58.024249 58.024249 0 0 1 37.715762-19.1992c12.884796-1.279947 25.769593 1.962585 36.563809 9.130286z m-28.926794 91.089538l-27.177535 30.377401 80.636641 83.409858 32.55331-36.905129-86.012416-76.88213z m-339.143203-33.278613a43.859506 43.859506 0 0 1 33.065289 72.70097c-6.954377 8.020999-16.596642 13.226116-27.092204 14.719387l-5.973085 0.383984H247.712345a44.24349 44.24349 0 0 1-31.017374-12.884796 43.774176 43.774176 0 0 1-12.799467-31.017375c0-22.313737 16.468647-40.659639 37.843757-43.518186l5.973084-0.426649h230.56106z m112.293988-195.959835c24.190992 0 43.774176 19.711179 43.774176 43.944835a43.774176 43.774176 0 0 1-37.886421 43.518187l-5.887755 0.426649H246.432399a44.200825 44.200825 0 0 1-31.017375-12.927462 43.688846 43.688846 0 0 1-12.799466-31.017374c0-22.271072 16.468647-40.659639 37.843756-43.518187l5.973085-0.426648h344.134994z" p-id="2726"></path></svg></el-icon>
                  <span>碳排放申报</span>
                </el-menu-item>
                <el-menu-item index="/carbonAccountingData">
                  <el-icon>
                    <svg t="1712470869293" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4673" width="200" height="200"><path d="M798.5152 707.9936v-77.0048c0-12.288-9.8304-22.7328-22.1184-22.7328-13.9264 0-24.1664 11.4688-24.1664 25.3952V739.328c0 8.192 6.7584 14.9504 14.9504 14.9504h83.5584c13.1072 0 24.1664-10.6496 23.7568-23.7568-0.4096-13.7216-11.6736-22.528-25.3952-22.528h-50.5856z m-502.3744-119.1936c-16.384 0-29.2864 13.9264-27.8528 30.5152 1.2288 14.5408 13.9264 25.3952 28.672 25.3952h142.9504c14.5408 0 27.2384-10.8544 28.672-25.3952 1.4336-16.5888-11.4688-30.5152-27.8528-30.5152h-144.5888z m0-231.6288h309.4528c15.7696 0 28.4672-12.9024 28.0576-28.8768-0.4096-14.9504-13.7216-27.2384-28.672-27.2384H296.7552c-14.7456 0-27.8528 11.8784-28.672 26.624-0.4096 7.9872 2.6624 15.5648 8.192 21.2992 5.3248 5.12 12.288 8.192 19.8656 8.192z m241.4592 113.0496c0-15.36-12.4928-28.0576-28.0576-28.0576H296.7552c-14.5408 0-27.2384 10.8544-28.4672 25.3952-1.4336 16.5888 11.6736 30.5152 28.0576 30.5152h213.4016c15.36 0.4096 27.8528-12.288 27.8528-27.8528z m0 0" p-id="4674"></path><path d="M568.5248 846.4384H248.0128c-24.1664 0-44.032-19.8656-44.032-44.032V212.1728c0-24.1664 19.8656-44.032 44.032-44.032h461.0048c24.1664 0 44.032 19.8656 44.032 44.032v223.0272c0 15.5648 11.6736 28.8768 27.0336 30.3104 17.6128 1.6384 32.3584-12.288 32.3584-29.696V212.1728c0-57.1392-46.4896-103.6288-103.424-103.6288H248.0128c-55.296 0-100.5568 43.008-103.424 98.0992v601.4976c2.8672 54.8864 48.3328 97.8944 103.424 97.8944h319.8976c14.9504 0 28.0576-10.6496 30.1056-25.3952 2.6624-18.432-11.6736-34.2016-29.4912-34.2016z m0 0" p-id="4675"></path><path d="M782.7456 502.1696c-111.8208 0-202.752 91.3408-201.9328 203.5712 0.8192 109.7728 90.5216 199.4752 200.4992 200.4992 112.0256 0.8192 203.5712-90.112 203.5712-201.9328-0.2048-111.616-90.7264-202.1376-202.1376-202.1376z m146.432 201.9328c0 81.5104-66.7648 147.456-148.48 146.432-78.848-1.024-143.1552-65.3312-144.384-143.9744-1.2288-81.92 64.9216-148.8896 146.432-148.8896 80.6912 0 146.432 65.536 146.432 146.432z m0 0" p-id="4676"></path></svg></el-icon>
                  <span>核算历史</span>
                </el-menu-item>
              </el-sub-menu>
              <el-menu-item index="/Shop">
                <el-icon>
                  <svg t="1712470708113" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1740" width="200" height="200"><path d="M929 324.87L856.13 149a32.18 32.18 0 0 0-11.84-14.38c-8.16-5.46-8.71-5.4-332-5.4-325.79 0.05-325.79 0.05-334.79 7.55a32 32 0 0 0-9 12.2L94.25 326.25C78.54 373 82.08 421.93 104 460.41c15.18 26.75 37.06 47.39 62.25 61.84v275.89A96 96 0 0 0 262 894h499.71a96 96 0 0 0 95.83-95.84V524.31a156.65 156.65 0 0 0 43.79-34.65c36.92-42.23 47.8-104.56 27.67-164.79zM563.83 830H459.92V689.81h103.91z m197.88 0H627.83V657.81a32 32 0 0 0-32-32H427.92a32 32 0 0 0-32 32V830H262a31.88 31.88 0 0 1-31.83-31.84V542.32c43.12 3.9 86-7.91 119.42-35a164.76 164.76 0 0 0 29.25-30.61 166.16 166.16 0 0 0 266.83 0.36 166.74 166.74 0 0 0 37.46 36.54c32.27 22.9 71.1 33 110.37 29.58v255A31.88 31.88 0 0 1 761.71 830z m91.46-382.44a91.27 91.27 0 0 1-41.29 27.27c-32.55 10.14-65.13 5.42-91.67-13.4-26-18.48-41.58-47.29-42.67-78a32.3 32.3 0 0 0-30.37-32.23h-1.63a32.37 32.37 0 0 0-32.16 31.19A100.77 100.77 0 0 1 512.25 480c-54.83 0-99.25-42.9-101.12-96.55a32.09 32.09 0 0 0-64.17-1.1 101.11 101.11 0 0 1-37.54 75.19c-23.17 18.75-52.46 26.14-82.59 20.75-27.66-5-52.16-23-67.2-49.5-12.92-22.67-14.63-52.63-5.55-80l65.17-155.52c95.71-0.09 489.67-0.21 585.92-0.09L869 347.27c12.29 36.64 6.21 75.08-15.83 100.27z" p-id="1741"></path></svg></el-icon>
                <span>交易市场</span>
              </el-menu-item>
              <el-menu-item index="/Traceability">
                <el-icon>
                  <svg t="1712471042691" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11425" width="200" height="200"><path d="M512 729.984a218.048 218.048 0 1 1 218.048-218.048 43.584 43.584 0 0 1-87.232 0A130.816 130.816 0 1 0 512 642.752a43.584 43.584 0 0 1 0 87.232z m0 174.4a392.448 392.448 0 1 1 392.448-392.448 43.584 43.584 0 0 1-87.232 0 305.216 305.216 0 1 0-122.496 244.608L481.088 542.912a43.584 43.584 0 0 1 61.504-61.504l246.784 246.784a43.584 43.584 0 0 1 0 61.504A392.448 392.448 0 0 1 512 904.448z" fill="#bfbfbf" fill-opacity="0.9" p-id="11426"></path></svg></el-icon>
                <span>溯源中心</span>
              </el-menu-item>
              <el-menu-item index="/Teach">
                <el-icon>
                  <svg t="1712471094044" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12563" width="200" height="200"><path d="M141.920656 850.353077a26.806427 26.806427 0 0 1-20.809951-9.837431 508.840568 508.840568 0 0 1-42.548611-59.701056 27.047204 27.047204 0 0 1 46.160256-28.124964A448.990461 448.990461 0 0 0 162.810866 806.096101a27.150394 27.150394 0 0 1-3.554317 38.077051 28.090568 28.090568 0 0 1-17.335893 6.179925z m0 0" p-id="12564"></path><path d="M511.89063 1023.998647a508.381946 508.381946 0 0 1-295.05415-93.547323 27.001342 27.001342 0 1 1 31.106004-44.14232 455.181851 455.181851 0 0 0 263.948146 83.595236c252.505539 0 458.013839-205.5083 458.013839-458.013839S764.396169 53.865097 511.89063 53.865097 53.979981 259.488052 53.979981 512.005056a456.54625 456.54625 0 0 0 18.413654 128.769455 27.049497 27.049497 0 0 1-51.915955 15.214769A513.04842 513.04842 0 0 1 0.000229 512.005056C0.000229 229.643257 229.643486 0 512.005286 0s511.993591 229.643257 511.99359 512.005056-229.689119 511.993591-512.108246 511.993591z m0 0" p-id="12565"></path><path d="M847.888216 556.674792V439.81803a31.415574 31.415574 0 0 0-14.905199-25.808925L524.193152 257.722359a25.545218 25.545218 0 0 0-22.690299-0.240776L166.307855 417.093334a25.785995 25.785995 0 0 0 0.321035 46.653274l157.146661 72.462199c-0.080259 23.481421-0.080259 106.962002-0.080258 111.055199 0 18.184343 6.111132 36.276962 17.691325 52.363111 10.318984 14.308991 24.685303 26.944014 42.789387 37.629895 34.660321 20.35133 80.258765 31.610488 128.264971 31.610488s93.616116-11.247693 128.230575-31.644885c18.104084-10.605622 32.493334-23.240645 42.789387-37.629895 11.580193-16.051753 17.691325-34.178768 17.691325-52.363111 0-4.655008 0-114.838827-0.160518-117.097537-0.080259-0.882846-0.160518-1.765693-0.240776-2.568281l95.702844-48.980777v76.326085a50.987247 50.987247 0 1 0 75.202463 44.876115 51.434403 51.434403 0 0 0-23.813922-43.110422z m-198.239149 90.486024c0 33.123939-56.376049 70.04297-137.28835 70.04297s-137.276884-36.919032-137.276884-70.04297v-87.344467l126.671262 58.382518a25.292976 25.292976 0 0 0 10.777605 2.293108 26.221685 26.221685 0 0 0 11.740711-2.751729l125.295397-64.092356c0.080259 32.413075 0.080259 89.832489 0.080259 93.535857z m-137.586454-80.9123l-274.026353-126.338761 274.221267-130.695666 252.241832 127.794885z m308.503226 48.338707a14.802009 14.802009 0 1 1 14.802009-14.802009 14.813475 14.813475 0 0 1-14.802009 14.802009z m0 0" p-id="12566"></path></svg></el-icon>
                <span>培训中心</span>
              </el-menu-item>
            </el-menu>

          </el-scrollbar>
        </el-card>
      </el-aside>
      <el-container>
        <el-header class="header">
          <el-card class="header-card">
            <el-button-group class="header-card-button">
              <el-button>
                <el-icon><Monitor /></el-icon>
              </el-button>
              <el-button @click="addnewmodel">
                <el-icon><FullScreen /></el-icon>
              </el-button>
              <el-button>
                <el-icon><Delete /></el-icon>
              </el-button>
              <el-button>
                <el-icon><Search /></el-icon>
              </el-button>
              <el-button>
                <el-icon><Message /></el-icon>
              </el-button>
              <el-tooltip content="数据审核员" placement="bottom">
                <el-button class="header-card-button-avatar" @click="goToPersonalPage">
                  <img :src="avatarUrl" alt="avatar">
                  <span>{{ID}}</span>
                </el-button>
              </el-tooltip>
              <el-button>
                <el-icon><Setting /></el-icon>
              </el-button>
            </el-button-group>
          </el-card>
        </el-header>
        <el-main class="main">
          <router-view></router-view>
        </el-main>
      </el-container>
    </el-container>
  </div>
</template>

<style scoped>
.common-layout {
  height: 100vh;
  width: 100vw;
  background-color: #F5F5F5;
}

.aside {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 275px;
}

.aside-card {
  height: 100vh;
  background-color: #283342;
}

.aside-card :deep(.el-card__body) {
  padding: 0;
}

.aside-card-logo {
  height: 60px;
  background-color: #283342;
  display: flex;
  justify-content: center;
  align-items: center;
}

.aside-card-logo img {
  width: 100%;
}

.aside-card .el-scrollbar {
  height: calc(100vh - 60px);
}

.el-menu-vertical-demo {
  border: 0;
}

.el-menu-vertical-demo span {
  font-weight: bold;
}

.el-menu-item {
  border-radius: 10px;
  margin: 0 10px;
}

.el-menu-item.is-active {
  background-color: #009099;
  border-radius: 10px;
}

:deep(.el-sub-menu__title) {
  border-radius: 10px;
  margin: 0 10px;
}

.header {
  position: fixed;
  top: 0;
  right: 0;
  width: calc(100vw - 275px);
  padding: 0;
  display: flex;
  justify-content: right;
  align-items: center;
}

.header-card {
  height: 50px;
  margin: 0 15px 0 0;
  display: flex;
  justify-content: center;
  align-items: center;
}

.header :deep(.el-card__body) {
  padding: 0;
}

.header-card-button .el-button {
  height: 50px;
  font-size: large;
  padding: 10px;
  border: 0;
}

.header-card-button .el-button .el-icon {
  color: #000000;
  transition: all .3s ease;
}

.header-card-button .el-button .el-icon:hover {
  transform: scale(1.25);
}

.header-card-button-avatar img {
  height: 25px;
  width: 25px;
  border-radius: 50%;
  margin-right: 10px;
}

.header-card-button-avatar span {
  font-size: 14px;
}

.main {
  position: fixed;
  bottom: 0;
  right: 0;
  height: calc(100vh - 60px);
  width: calc(100vw - 275px);
  padding: 0;
}

:deep(.el-card) {
  border: 0;
  border-radius: 0;
}
</style>
