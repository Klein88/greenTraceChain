import{r as o,o as ie,a as i,b as x,c as g,e,w as a,F as b,d as f,f as u,l as R,g as re,E as m}from"./index-Dqiu3Z7p.js";const me={style:{display:"flex","align-items":"center","margin-left":"30px","margin-top":"10px"}},fe=f("text",null,"合约名称：",-1),ve={style:{display:"flex","justify-content":"center","margin-top":"40px"}},ye=f("p",null,"冻结合约需经过其它组织投票同意，请输入冻结理由。",-1),ce={style:{display:"flex","justify-content":"center","margin-top":"40px"}},Ve=f("p",null,"废止合约需经过其它组织投票同意，请输入废止理由。",-1),xe={style:{display:"flex","justify-content":"center","margin-top":"40px"}},ge={style:{display:"flex","justify-content":"center","margin-top":"40px"}},he={__name:"ContractManagement",setup(be){const q=re(),{proxy:H}=q,S=o(),v=o(!1),y=o(!1),c=o(!1),V=o(!1),j=o(""),A=o(""),P=o(""),z=[{label:"GASM",value:"GASM"},{label:"DOCKER_GO",value:"DOCKER_GO"},{label:"WASMER",value:"WASMER"},{label:"WXVM",value:"WXVM"},{label:"EVM",value:"EVM"}],F=o(""),_=o(""),h=o(""),w=o(""),C=o(""),G=[{label:"调用",value:"调用"},{label:"查询",value:"查询"}],k=o(""),L=o(""),T=o(""),D=o(""),I=o(""),K=o(""),O=o("");ie(()=>{W()});const W=()=>{H.$axios.post("http://47.97.176.174:8087/chainmaker?cmb=GetContractList",{chainId:"Chain01",contractName:"",pageNum:0,pageSize:100}).then(s=>{S.value=s.data.data,console.log(s)})},J=()=>{v.value=!0},Q=()=>{v.value=!1,m.success("添加成功")},Y=()=>{v.value=!1,m.info("已取消")},Z=()=>{y.value=!0},ee=()=>{y.value=!1,m.success("冻结成功")},le=()=>{y.value=!1,m.info("已取消")},ae=()=>{c.value=!0},te=()=>{c.value=!1,m.success("注销成功")},oe=()=>{c.value=!1,m.info("已取消")},ne=()=>{V.value=!0},ue=()=>{V.value=!1,m.success("升级成功")},de=()=>{V.value=!1,m.info("已取消")};return(s,t)=>{const d=i("el-input"),n=i("el-button"),r=i("el-table-column"),pe=i("el-table"),se=i("el-card"),p=i("el-form-item"),U=i("el-option"),M=i("el-select"),B=i("Plus"),X=i("el-icon"),$=i("el-upload"),N=i("el-form"),E=i("el-dialog");return x(),g(b,null,[e(se,{shadow:"never",style:{margin:"30px 15px 0 15px"}},{default:a(()=>[f("div",me,[fe,e(d,{modelValue:s.contractName,"onUpdate:modelValue":t[0]||(t[0]=l=>s.contractName=l),placeholder:"请输入合约名称",style:{width:"20%",height:"38px","margin-left":"5px"}},null,8,["modelValue"]),e(n,{type:"primary",icon:"Search",onClick:s.search,style:{width:"100px",height:"37px","font-size":"16px","margin-left":"20px"}},{default:a(()=>[u("搜索")]),_:1},8,["onClick"]),e(n,{type:"success",icon:"List",onClick:W,style:{width:"180px",height:"37px","font-size":"16px","margin-left":"80px"}},{default:a(()=>[u("查询所有")]),_:1}),e(n,{type:"danger",icon:"FolderAdd",onClick:J,style:{width:"180px",height:"37px","font-size":"16px","margin-left":"80px"}},{default:a(()=>[u("部署合约")]),_:1})]),e(pe,{data:S.value,border:"",style:{width:"100%","margin-top":"30px"},height:"550","header-cell-style":{background:"#f4f4f5"}},{default:a(()=>[e(r,{label:"合约编号",prop:"Id",width:"85",align:"center"}),e(r,{label:"合约名称",prop:"ContractName",width:"150",align:"center"}),e(r,{label:"合约版本",prop:"ContractVersion",width:"90",align:"center"}),e(r,{label:"交易数量",prop:"TxNum",width:"90",align:"center"}),e(r,{label:"时间戳",prop:"Timestamp",width:"130",align:"center"}),e(r,{label:"地址",prop:"Addr",width:"370",align:"center"}),e(r,{label:"所属组织",prop:"Sender",width:"250",align:"center"}),e(r,{label:"操作",width:"170"},{default:a(l=>[e(n,{type:"primary",text:"",onClick:Z},{default:a(()=>[u("冻结")]),_:1}),e(n,{type:"primary",text:"",onClick:ae},{default:a(()=>[u("注销")]),_:1}),e(n,{type:"primary",text:"",onClick:ne},{default:a(()=>[u("升级")]),_:1}),e(n,{type:"primary",text:"",onClick:s.edit},{default:a(()=>[u("编辑")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(E,{modelValue:v.value,"onUpdate:modelValue":t[10]||(t[10]=l=>v.value=l),title:"部署合约"},{default:a(()=>[e(N,null,{default:a(()=>[e(p,{label:"合约名称"},{default:a(()=>[e(d,{modelValue:j.value,"onUpdate:modelValue":t[1]||(t[1]=l=>j.value=l),style:{"margin-left":"30px"}},null,8,["modelValue"])]),_:1}),e(p,{label:"合约版本"},{default:a(()=>[e(d,{modelValue:A.value,"onUpdate:modelValue":t[2]||(t[2]=l=>A.value=l),style:{"margin-left":"30px"}},null,8,["modelValue"])]),_:1}),e(p,{label:"虚拟机类型"},{default:a(()=>[e(M,{modelValue:P.value,"onUpdate:modelValue":t[3]||(t[3]=l=>P.value=l),clearable:"",placeholder:"请选择虚拟机类型",style:{"margin-left":"15px"}},{default:a(()=>[(x(),g(b,null,R(z,l=>e(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"合约文件"},{default:a(()=>[e($,{ref:"upload",class:"upload-demo",action:"https://jsonplaceholder.typicode.com/posts/","on-preview":s.handlePreview,"on-remove":s.handleRemove,"file-list":s.fileList,"list-type":"picture-card","auto-upload":!1,onChange:s.handleFileChange,style:{"margin-left":"30px"}},{default:a(()=>[e(X,null,{default:a(()=>[e(B)]),_:1})]),_:1},8,["on-preview","on-remove","file-list","onChange"])]),_:1}),e(p,{label:"部署理由"},{default:a(()=>[e(d,{modelValue:F.value,"onUpdate:modelValue":t[4]||(t[4]=l=>F.value=l),rows:3,type:"textarea",placeholder:"部署合约需其他组织同意，请输入部署理由",style:{"margin-left":"30px"}},null,8,["modelValue"])]),_:1}),e(p,{label:"额外信息"},{default:a(()=>[e(d,{modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=l=>_.value=l),style:{width:"225px","margin-left":"30px"},placeholder:"Key"},null,8,["modelValue"]),e(d,{modelValue:h.value,"onUpdate:modelValue":t[6]||(t[6]=l=>h.value=l),style:{width:"225px","margin-left":"20px"},placeholder:"Value"},null,8,["modelValue"]),e(n,{type:"primary",style:{width:"80px","margin-left":"30px"}},{default:a(()=>[u("增加")]),_:1})]),_:1}),e(p,{label:"合约调用方法"},{default:a(()=>[e(d,{modelValue:w.value,"onUpdate:modelValue":t[7]||(t[7]=l=>w.value=l),style:{width:"150px","margin-left":"2px"},placeholder:"Method"},null,8,["modelValue"]),e(M,{modelValue:C.value,"onUpdate:modelValue":t[8]||(t[8]=l=>C.value=l),clearable:"",placeholder:"请选择",style:{width:"150px","margin-left":"10px"}},{default:a(()=>[(x(),g(b,null,R(G,l=>e(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e(d,{modelValue:k.value,"onUpdate:modelValue":t[9]||(t[9]=l=>k.value=l),style:{width:"150px","margin-left":"10px"},placeholder:"Param"},null,8,["modelValue"]),e(n,{type:"primary",style:{width:"80px","margin-left":"30px"}},{default:a(()=>[u("增加")]),_:1})]),_:1})]),_:1}),f("div",ve,[e(n,{type:"primary",onClick:Q,style:{width:"120px"}},{default:a(()=>[u("确定")]),_:1}),e(n,{type:"default",onClick:Y,style:{width:"120px","margin-left":"80px"}},{default:a(()=>[u("取消")]),_:1})])]),_:1},8,["modelValue"]),e(E,{modelValue:y.value,"onUpdate:modelValue":t[12]||(t[12]=l=>y.value=l),title:"冻结合约"},{default:a(()=>[ye,e(N,null,{default:a(()=>[e(p,{label:"理由"},{default:a(()=>[e(d,{modelValue:L.value,"onUpdate:modelValue":t[11]||(t[11]=l=>L.value=l),rows:5,type:"textarea",placeholder:"请输入冻结合约理由"},null,8,["modelValue"])]),_:1})]),_:1}),f("div",ce,[e(n,{type:"primary",onClick:ee,style:{width:"120px"}},{default:a(()=>[u("确定")]),_:1}),e(n,{type:"default",onClick:le,style:{width:"120px","margin-left":"80px"}},{default:a(()=>[u("取消")]),_:1})])]),_:1},8,["modelValue"]),e(E,{modelValue:c.value,"onUpdate:modelValue":t[14]||(t[14]=l=>c.value=l),title:"废止合约"},{default:a(()=>[Ve,e(N,null,{default:a(()=>[e(p,{label:"理由"},{default:a(()=>[e(d,{modelValue:T.value,"onUpdate:modelValue":t[13]||(t[13]=l=>T.value=l),rows:5,type:"textarea",placeholder:"请输入废止合约理由"},null,8,["modelValue"])]),_:1})]),_:1}),f("div",xe,[e(n,{type:"primary",onClick:te,style:{width:"120px"}},{default:a(()=>[u("确定")]),_:1}),e(n,{type:"default",onClick:oe,style:{width:"120px","margin-left":"80px"}},{default:a(()=>[u("取消")]),_:1})])]),_:1},8,["modelValue"]),e(E,{modelValue:V.value,"onUpdate:modelValue":t[24]||(t[24]=l=>V.value=l),title:"升级合约"},{default:a(()=>[e(N,null,{default:a(()=>[e(p,{label:"合约名称"},{default:a(()=>[e(d,{modelValue:D.value,"onUpdate:modelValue":t[15]||(t[15]=l=>D.value=l),style:{"margin-left":"30px"}},null,8,["modelValue"])]),_:1}),e(p,{label:"升级版本号"},{default:a(()=>[e(d,{modelValue:I.value,"onUpdate:modelValue":t[16]||(t[16]=l=>I.value=l),style:{"margin-left":"15px"}},null,8,["modelValue"])]),_:1}),e(p,{label:"虚拟机类型"},{default:a(()=>[e(M,{modelValue:K.value,"onUpdate:modelValue":t[17]||(t[17]=l=>K.value=l),clearable:"",placeholder:"请选择虚拟机类型",style:{"margin-left":"15px"}},{default:a(()=>[(x(),g(b,null,R(z,l=>e(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"合约文件"},{default:a(()=>[e($,{ref:"upload",class:"upload-demo",action:"https://jsonplaceholder.typicode.com/posts/","on-preview":s.handlePreview,"on-remove":s.handleRemove,"file-list":s.fileList,"list-type":"picture-card","auto-upload":!1,onChange:s.handleFileChange,style:{"margin-left":"30px"}},{default:a(()=>[e(X,null,{default:a(()=>[e(B)]),_:1})]),_:1},8,["on-preview","on-remove","file-list","onChange"])]),_:1}),e(p,{label:"升级理由"},{default:a(()=>[e(d,{modelValue:O.value,"onUpdate:modelValue":t[18]||(t[18]=l=>O.value=l),rows:3,type:"textarea",placeholder:"部署合约需其他组织同意，请输入部署理由",style:{"margin-left":"30px"}},null,8,["modelValue"])]),_:1}),e(p,{label:"额外信息"},{default:a(()=>[e(d,{modelValue:_.value,"onUpdate:modelValue":t[19]||(t[19]=l=>_.value=l),style:{width:"225px","margin-left":"30px"},placeholder:"Key"},null,8,["modelValue"]),e(d,{modelValue:h.value,"onUpdate:modelValue":t[20]||(t[20]=l=>h.value=l),style:{width:"225px","margin-left":"20px"},placeholder:"Value"},null,8,["modelValue"]),e(n,{type:"primary",style:{width:"80px","margin-left":"30px"}},{default:a(()=>[u("增加")]),_:1})]),_:1}),e(p,{label:"合约调用方法"},{default:a(()=>[e(d,{modelValue:w.value,"onUpdate:modelValue":t[21]||(t[21]=l=>w.value=l),style:{width:"150px","margin-left":"2px"},placeholder:"Method"},null,8,["modelValue"]),e(M,{modelValue:C.value,"onUpdate:modelValue":t[22]||(t[22]=l=>C.value=l),clearable:"",placeholder:"请选择",style:{width:"150px","margin-left":"10px"}},{default:a(()=>[(x(),g(b,null,R(G,l=>e(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),e(d,{modelValue:k.value,"onUpdate:modelValue":t[23]||(t[23]=l=>k.value=l),style:{width:"150px","margin-left":"10px"},placeholder:"Param"},null,8,["modelValue"]),e(n,{type:"primary",style:{width:"80px","margin-left":"30px"}},{default:a(()=>[u("增加")]),_:1})]),_:1})]),_:1}),f("div",ge,[e(n,{type:"primary",onClick:ue,style:{width:"120px"}},{default:a(()=>[u("确定")]),_:1}),e(n,{type:"default",onClick:de,style:{width:"120px","margin-left":"80px"}},{default:a(()=>[u("取消")]),_:1})])]),_:1},8,["modelValue"])],64)}}};export{he as default};
